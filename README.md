# CIVENG794 Course Project — Traffic Flow Modeling & Simulation

## Code Structure for Tasks 1, 2, and 3

```text
.
├── run_all.py          # Main code which runs every modules in sequence
├── models.py           # Shared logic (Wiedemann Car Following Model + Helper Functions)
├── calibrate_cf.py     # CF calibration using NGSIM trajectory data
├── calibrate_lc.py     # MOBIL LC calibration using NGSIM trajectory data
├── stability.py        # Local + string stability analysis
├── ctm.py              # Cell Transmission Model (macroscopic simulation)
└── (data/)             # CSV dataset in this sub-directory: name format: 'trajectories-0500-0515.csv'

```

To run the code for the project:

1. Make sure the data is in the sub directory **data** which has the file name 'trajectories-0500-0515.csv'. The dataset decription and how to download is below.

```terminal
python run_all.py
```

To run the code for each part of the project, for example the stability analysis:
```terminal
python stability.py
```

Note: Make sure the files that are generated by the codes before are present before you run the code, i.e cf_best_params.csv is needed for **stability.py**.

## CIV794 Course Project

#### DATASET: 
**Next Generation Simulation** ([NGSIM](https://ops.fhwa.dot.gov/trafficanalysistools/ngsim.htm))<br>
[To download](https://data.transportation.gov/Automobiles/Next-Generation-Simulation-NGSIM-Vehicle-Trajector/8ect-6jqj/about_data) Scroll down to **About this Dataset** section, then in the **Attachments**, select what kind of data and information to download.

The i-80 dataset zip file has:
1. i-80-weather-data.zip
2. i-80-vehicle-trajectory-data.zip
    - vehicle-trajectory-data
        - 0400pm-0415pm
        - 0500pm-0515pm
        - 0515pm-0530pm
3. i-80-signs.zip
4. i-80-signal-timing.zip
5. i-80-gis-files.zip
6. i-80-detector-data.zip
7. i-80-data-analysis.zip
8. i-80-cad-diagram.zip
9. i-80-aerial-ortho-photos.zip

**Data Description**<br>
Vehicle Trajectory Data (_**trajectories-<start_time>-<end_time>.csv**_): East-bound direction of Interstate 80 in Emeryville, California on April 13, 2005. These files contain transcribed data from 4:00 p.m. to 4:15 p.m., 5:00 p.m. to 5:15 p.m. and 5:15 p.m. to 5:30 p.m. This data was collected using seven video cameras mounted on a 30-story building, Pacific Park Plaza, which is located in 6363 Christie Avenue and is adjacent to the study area. Vehicle trajectory data were transcribed from the video data using a customized software application developed for NGSIM. This program was used to automatically detect and track most vehicles from the video images and transcribe the trajectory data to a database.

The X accuracy of this data set is estimated at around 2 feet and the Y accuracy is estimated at around 4 feet.

| Attribute Label | Definition | Value Type |
|:---|:---|:---|
| **Vehicle\_ID** (Column A) | Vehicle identification number (ascending by time of entry into section). | Integer |
| **Frame\_ID** (Column B) | Frame Identification number (ascending by start time). | Integer |
| **Total\_Frames** (Column C) | Total number of frames in which the vehicle appears in this data set. | Integer |
| **Global\_Time** (Column D) | Elapsed time in milliseconds since Jan 1, 1970. | Double |
| **Local\_X** (Column E) | Lateral (X) coordinate of the front center of the vehicle in feet with respect to the left-most edge of the section in the direction of travel. | Double |
| **Local\_Y** (Column F) | Longitudinal (Y) coordinate of the front center of the vehicle in feet with respect to the entry edge of the section in the direction of travel. | Double |
| **Global\_X** (Column G) | X Coordinate of the front center of the vehicle in feet based on CA State Plane III in NAD83. | Double |
| **Global\_Y** (Column H) | Y Coordinate of the front center of the vehicle in feet based on CA State Plane III in NAD83. | Double |
| **v\_Length** (Column I) | Length of vehicle in feet. | Double |
| **v\_Width** (Column J) | Width of vehicle in feet. | Double |
| **v\_Class** (Column K) | Vehicle type: 1 - motorcycle, 2 - auto, 3 - truck. | Integer |
| **v\_Vel** (Column L) | Instantaneous velocity of vehicle in feet/second. | Double |
| **v\_Acc** (Column M) | Instantaneous acceleration of vehicle in feet/second square. | Double |
| **Lane\_ID** (Column N) | Current lane position of vehicle. Lane 1 is farthest left lane; Lane 6 is farthest right lane. Lane 7 is the on-ramp at Powell Street, and Lane 9 is the shoulder on the right-side. | Integer |
| **Preceding** (Column O) | Vehicle Id of the lead vehicle in the same lane. A value of '0' represents no preceding vehicle. | Integer |
| **Following** (Column P) | Vehicle Id of the vehicle following the subject vehicle in the same lane. A value of '0' represents no following vehicle. | Integer |
| **Space\_Headway** (Column Q) | Space Headway in feet. Distance between the front-center of a vehicle to the front-center of the preceding vehicle. | Double |
| **Time\_Headway** (Column R) | Time Headway in seconds. Time Headway provides the time to travel from the front-center of a vehicle (at the speed of the vehicle) to the front-center of the preceding vehicle. A headway value of 9999.99 means that the vehicle is traveling at zero speed (congested conditions). | Double |

